
import choose_page;
import test_page;
import instructions;
import stimuli;

Block task
{
    on_event:entry()
    {
        // if neccessary 
        // control.button_box.open();
    }
    
    Part blank1
    {
        on_event:entry()
        {
            blank_page.action_auto(this, 500ms);
        }
    }

    Part part_instructions
    {
        on_event:entry()
        {
            pause_page.set_text(PART_INSTRUCTION, true);
            pause_page.action(this);
            control.button_box.enable_all_buttons(CONTINUE);
        }
    }

    Part blank2
    {
        on_event:entry()
        {
            blank_page.action_auto(this, 500ms);
        }
    }

    Part choose_part
    {
        on_event:entry()
        {
            choose_page.action(this, reference_time);
        }

        on_event:exit()
        {
            int value = choose_page.selected_list;
            // from stimuli
            int err = select_list(value);
            if (err)
                terminate "Unable to load stimuli.\r\n";
        }
    }

    Part test_instructions
    {
        on_event:entry()
        {
            pause_page.set_text(TEST_INSTRUCTION, true);
            pause_page.action(this);
            control.button_box.enable_all_buttons(CONTINUE);
        }
    }


}

void action (Part caller)
{
    // Enter needs a caller, to signal when the task finishes.
    task.enter(caller);
}
